<p-dialog [(visible)]="visible" [style]="{ width: '650px' }" header="Sub Evento Información" [modal]="true"
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [maximizable]="true" styleClass="p-fluid">
    <div class="grid grid-cols-3 gap-2">
        <div class="col-span-3 md:col-span-1 gap-2">

            <div class="field">
                <label for="name" class="label-filter">Nombre</label>
                <input type="text" class="input-filter" pInputText id="name" [(ngModel)]="dtoRegister.nombre" required
                    autofocus />

            </div>
            <div class="field">
                <label for="description" class="label-filter">Descripción</label>
                <textarea id="description" pInputTextarea [(ngModel)]="dtoRegister.descripcion" required rows="3"
                    cols="20">
                            </textarea>
            </div>
            <div class="field">
                <label for="dia" class="label-filter">
                    DIA
                </label>
                <p-calendar class="input-filter-date" [(ngModel)]="dtoRegister.dia" [iconDisplay]="'input'"
                    [showIcon]="true" inputId="icondisplay" dateFormat="dd/mm/yy" />
            </div>
            <div class="grid grid-cols-2">
                <div class="field col">
                    <label for="horaInicio" class="label-filter">horaInicio</label>
                    <p-calendar class="input-filter-date" [(ngModel)]="dtoRegister.horaInicio" [timeOnly]="true"
                        [iconDisplay]="'input'" [showIcon]="true" inputId="icondisplay" />

                </div>
                <div class="field col">
                    <label for="horaFin" class="label-filter">horaFin</label>
                    <p-calendar class="input-filter-date" [(ngModel)]="dtoRegister.horaFin" [timeOnly]="true"
                        [iconDisplay]="'input'" [showIcon]="true" inputId="icondisplay" dateFormat="dd/mm/yy" />

                </div>
            </div>
            <p-divider></p-divider>
            <div class="field">
                <label for="description" class="label-filter">Enlace Foto</label>
                <input type="text" class="input-filter" pInputText id="description" [(ngModel)]="dtoRegister.foto.url"
                    required autofocus />

            </div>
            <div class="col-span-2">
                <label for="name_route" class="label-filter">
                    LUGAR
                </label>
                <p-inputGroup>
                    <input type="text" class="input-filter" pInputText [(ngModel)]="dtoRegister.foto.lugar" />
                    <button type="button" (click)="coreShowSelectors('LugarSelectorPhoto')" pButton
                        icon="pi pi-search"></button>
                </p-inputGroup>
            </div>
            <div class="field">
                <label for="Titulo" class="label-filter">Titulo</label>

                <input type="text" class="input-filter" pInputText id="description"
                    [(ngModel)]="dtoRegister.foto.titulo" required autofocus />
            </div>
            <div class="col-span-2">
                <label for="name_route" class="label-filter">
                    PROVEEDOR ID
                </label>
                <p-inputGroup>
                    <input type="text" class="input-filter" pInputText [(ngModel)]="dtoRegister.foto.proveedorDesc" />
                    <button type="button" (click)="coreShowSelectors('ProveedorSelector')" pButton
                        icon="pi pi-search"></button>
                </p-inputGroup>

            </div>

        </div>
        <div class="col-span-3 md:col-span-2 gap-2">
            <div class="global-center-end">
                <p-button severity="success" label="AGREGAR" icon="pi pi-plus" class="mr-2"
                    (onClick)="addSubEvento()" />
            </div>
            <p-table [value]="dtoRegister.subEventoDetalles" dataKey="id" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr class="text-xs text-center">
                        <th style="width:15%">
                            Titulo
                        </th>
                        <th style="width:75%">
                            Detalle
                        </th>
                        <th style="width:5%">
                            Hora Inicio
                        </th>
                        <th style="width:5%">
                            Hora Fin
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item let-editing="editing">
                    <tr class="text-xs text-justify">
                        <td [pEditableColumn]="item.organizador" pEditableColumnField="organizador">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" class="input-filter" [(ngModel)]="item.organizador"
                                        placeholder="Título" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    
                                    <p class="cursor-text {item.organizador ? 'text-black' : 'text-gray-100'}">
                                        {{ item.organizador ? item.organizador : '...........' }}
                                    </p>
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="item.detalle" pEditableColumnField="detalle">
                            <p-cellEditor>
                                <ng-template pTemplate="input">

                                    <textarea pInputTextarea class="input-filter h-full" [(ngModel)]="item.detalle"
                                        placeholder="Detalle" required rows="6" cols="20"></textarea>
                                </ng-template>
                                <ng-template pTemplate="output">

                                    <p class="cursor-text {item.detalle ? 'text-black' : 'text-gray-100'}">
                                        {{ item.detalle ? item.detalle : '...........' }}
                                    </p>

                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="item.horaInicio" pEditableColumnField="horaInicio">
                            <p-cellEditor>
                                <ng-template pTemplate="input">


                                    <input pInputText type="text" class="input-filter w-36"
                                        [(ngModel)]="item.horaInicio" placeholder="ejm. 11:00" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    <p class="cursor-text {item.horaInicio ? 'text-black' : 'text-gray-100'}">
                                        {{ item.horaInicio ? item.horaInicio : '...........' }}
                                    </p>
                                   
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="item.horaFin" pEditableColumnField="horaFin">
                            <p-cellEditor>
                                <ng-template pTemplate="input">

                                    <input pInputText type="text" class="input-filter w-36" [(ngModel)]="item.horaFin"
                                        placeholder="ejem. 24:00" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    <p class="cursor-text {item.horaFin ? 'text-black' : 'text-gray-100'}">
                                        {{ item.horaFin ? item.horaFin : '...........' }}
                                    </p>
                                    
                                </ng-template>
                            </p-cellEditor>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>


    <ng-template pTemplate="footer">
        <p-button label="Cancel" icon="pi pi-times" [text]="true" (onClick)="coreCloseSelector()" />
        <p-button label="Save" icon="pi pi-check" [text]="true" (onClick)="saveItem()" />
    </ng-template>
</p-dialog>

<app-lugar-selector-view></app-lugar-selector-view>
<app-proveedor-selector-view></app-proveedor-selector-view>